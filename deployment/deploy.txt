Load balancer nginex https://dzone.com/articles/load-balancing-apache-tomcat
Ansible https://adamcod.es/2014/09/23/vagrant-ansible-quickstart-tutorial.html
Multi machine https://manski.net/2016/09/vagrant-multi-machine-tutorial/

mysql config https://rclayton.silvrback.com/quick-mysql-box-using-vagrant-and-ansible

BOX_IMAGE = "atorre/daw"
NODE_COUNT = 2


Vagrant.configure(2) do |config|
	
	config.vm.define "load_balancer" do |subconfig|
		subconfig.vm.box = BOX_IMAGE
		subconfig.vm.hostname = "master"
		subconfig.vm.network :private_network, ip: "10.0.0.10"

		load_balancer.vm.provision :ansible do |ansible|
			ansible.playbook = "master.yml"
		end
	end

	config.vm.define "data_base" do |subconfig|
		subconfig.vm.box = BOX_IMAGE
		subconfig.vm.hostname = "mysql"
		subconfig.vm.network :private_network, ip: "10.10.10.10"

		data_base.vm.provision :ansible do |ansible|
			ansible.playbook = "mysql.yml"
		end
	end
	  
	(1..NODE_COUNT).each do |i|
		
		config.vm.define "node#{i}" do |subconfig|
			subconfig.vm.box = BOX_IMAGE
			subconfig.vm.hostname = "node#{i}"
			subconfig.vm.network :private_network, ip: "10.0.0.#{i + 10}"

			node#{i}.vm.provision :ansible do |ansible|
				ansible.playbook = "slaves.yml"
			end
		end

	end

end